<div class="warning">

Warning: The code in this example is insecure because the password is stored in clear text (i.e., the password is not hashed and no random salt is used). This example is only to illustrate SQL injections and should not be used for a login page.

</div>

Let's assume a website has a login page where a user enters a username and a password. The server then checks if the password is correct and logs the user in:

<pre class="language-python line-numbers" data-line="17"><code>
import mysql.connector

# connect to database
connection = mysql.connector.connect(
    host='localhost',
    database='db_name',
    user='db_user',
    password='db_password'
)
cursor = connection.cursor()

# username and password entered by the user
username = "foo"
password = "bar"

# username and password are concatenated into the query
query = "SELECT * FROM users WHERE name = '" + username + "' AND password = '" + password + "'"
cursor.execute(query)
result = cursor.fetchone()

if result is None:
    print("wrong username or password")
else:
    print("successfully logged in")

cursor.close()
connection.close()
</code></pre>

If the user enters `foo` as username and `bar` as password, the resulting query is:

<pre class="language-sql line-numbers"><code>
SELECT * FROM users WHERE name = 'foo' AND password = 'bar'
</code></pre>

Let's assume an attacker enters the string "`admin' --`" as username and `bar` as password. The resulting query is:

<pre class="language-sql line-numbers"><code>
SELECT * FROM users WHERE name = 'admin' --' AND password = 'bar'
</code></pre>

The apostrophe (`'`) in the username closes the string in the SQL query that was started at `WHERE name = '`. The rest of the username string (` --`) breaks out of the string value and changes the query itself.
The two dashes (`--`) then signal the start of a comment in SQL. As a result, the remaining part of the query is ignored:

<pre class="language-sql line-numbers"><code>
SELECT * FROM users WHERE name = 'admin'
</code></pre>

As you can see, the database would return the row containing the information about the user `admin` without checking whether the password is correct. The attacker would then be logged in as the user `admin`. If this is the administrator of the website, the attacker could take over the website.

To sum up, the issue in the code example is that an attacker is able to manipulate the query with his input.

SQL injections can also be used to **read data from other tables, modify data, or delete data**.
